"use strict";angular.module("proteinApp",["ngCookies","ngResource","ngSanitize","ui.router","ui.bootstrap","ngAnimate","ngMdIcons","ngTouch","ngMaterial","ngSanitize","com.2fdevs.videogular","com.2fdevs.videogular.plugins.controls","com.2fdevs.videogular.plugins.overlayplay","com.2fdevs.videogular.plugins.poster","com.2fdevs.videogular.plugins.buffering"]),function(){function a(a,b,c){function d(){return a.when(E)}function e(){var a,b=V.section;return a=b===G?N:n()[b].name}function f(){var a,b=V.section;return a=b===G?K:n()[b].animation}function g(){var a={},b=V.section,c=V.subSection;return a.title=I,a.title=y(b,c)?I:x(b,c)?N:!z(b)&&w(c)?n()[b-1].name:p()[c-1],a}function h(){var a={},b=V.section,c=V.subSection;return a.state=J,a.title=v(b,c)?I:y(b,c)?n()[L].name:A(c)&&!B(b)?n()[b+1].name:p()[c+1],a}function i(a,b){V.section=a,V.subSection=b,b===P&&(currentSection=a,console.log("UPDATE stage"),stage=0,console.log("CALL START ANIMATION NAVIGATION"),startPractice())}function j(a){var b=a.name.length;S=b>S?b:S}function k(){var a=n();return S=-1,a.forEach(j),S}function l(){var a=V.section,b=V.subSection;return y(a,b)?(i(L,M),C(M),!0):A(b)&&!B(a)?(i(a+1,M),C(M),!0):v()?void 0:(i(a,b+1),C(b+1),!0)}function m(){var a=V.section,b=V.subSection;return x(a,b)?(i(G,H),D(),!0):w(b)?(i(a-1,M),C(M),!0):(i(a,b-1),C(b-1),!0)}function n(){return R.sections}function o(){return R.name}function p(){return O}function q(){return Q}function r(){return angular.copy(V)}function s(){return V.section+1}function t(){return V.section}function u(){var a,b=V.section;return a=b!=G?n()[b].objectives:""}function v(a,b){return a===T&&b===U}function w(a){return a===M}function x(a,b){return a===L&&b===M}function y(a,b){return a===G||b===H}function z(a){return a===L}function A(a){return a===U}function B(a){return a===T}function C(a){var c="/"+Q[a];console.log("Path: "+c),b.path(c)}function D(){var a="/"+J;b.path(a)}var E=[{id:1,name:"Protein Structure",sections:[{name:"Polypeptide Chains",objectives:["Identify the functional groups involved in peptide bond formation","Describe the limitations on polypeptide sequence variation"],animation:"http://dynamoidapps.com/Wiley/Voet/video/protein_structure_part1.mp4",practiceSession:[{PDB:"threonine",instructions:"Click an atom in the amino group.",goal:"amino"},{PDB:"threonine",instructions:"Click an atom in the carboxyl group.",goal:"carboxyl"},{PDB:"threonine",instructions:"Click an atom in the side chain.",goal:"sideChain"}]},{name:"Secondary Structure",objectives:["Explain why the rotational freedom of a polypeptide is restricted","Recognize the hydrogen bonding patterns of secondary structures such as alpha helices and beta sheets"],animation:"http://dynamoidapps.com/Wiley/Voet/video/protein_structure_part2.mp4",practiceSession:[{PDB:"threonine",instructions:"Click an atom in the amino group.",goal:"amino"},{PDB:"threonine",instructions:"Click an atom in the carboxyl group.",goal:"carboxyl"},{PDB:"threonine",instructions:"Click an atom in the side chain.",goal:"sideChain"}]},{name:"Three-dimensional Structure",objectives:["Locate regular and irregular backbone structures","Compare ball-and-stick, spacefilling, and ribbon models of protein structure","Distinguish tertiary and quaternary structure"],animation:"http://dynamoidapps.com/Wiley/Voet/video/protein_structure_part3.mp4",practiceSession:[{PDB:"threonine",instructions:"Click an atom in the amino group.",goal:"amino"},{PDB:"threonine",instructions:"Click an atom in the carboxyl group.",goal:"carboxyl"},{PDB:"threonine",instructions:"Click an atom in the side chain.",goal:"sideChain"}]},{name:"Protein Families",objectives:["Recognize that different amino acid sequences can form similar structures","Identify the key residues in coiled coils and in collagen"],animation:"http://dynamoidapps.com/Wiley/Voet/video/protein_structure_part4.mp4",practiceSession:[{PDB:"threonine",instructions:"Click an atom in the amino group.",goal:"amino"},{PDB:"threonine",instructions:"Click an atom in the carboxyl group.",goal:"carboxyl"},{PDB:"threonine",instructions:"Click an atom in the side chain.",goal:"sideChain"}]},{name:"Protein Stability",objectives:["Describe protein structure in terms of the hydrophobic effect","Identify different types of intramolecular forces that help stabilize proteins","Describe how changing salt concentration or pH can alter protein structure","Explain why a proteinâ€™s structure must be somewhat flexible"],animation:"http://dynamoidapps.com/Wiley/Voet/video/protein_structure_part5.mp4",practiceSession:[{PDB:"threonine",instructions:"Click an atom in the amino group.",goal:"amino"},{PDB:"threonine",instructions:"Click an atom in the carboxyl group.",goal:"carboxyl"},{PDB:"threonine",instructions:"Click an atom in the side chain.",goal:"sideChain"}]}]}],F=0,G=-1,H=-1,I="",J="main",K="",L=0,M=0,N="Introduction",O=["Objectives","Animation","Practice Session"],P=2,Q=["objectives","animation","practice"],R=E[F],S=-1,T=R.sections.length-1,U=O.length-1,V={section:G,subSection:H},W={loadAll:d,getSections:n,getCurrentStateTitle:o,getSectionStructure:p,getSectionStructureStates:q,getTitleMaxLength:k,setCurrentSectionState:i,getCurrentTitle:e,getCurrentSectionNumber:s,getCurrentSection:t,getCurrentObjectives:u,getCurrentAnimation:f,getPrevious:g,getNext:h,goNext:l,goPrevious:m,getCurrentSectionState:r};return W}angular.module("proteinApp").factory("navigationService",a),a.$inject=["$q","$location","$http"]}(),function(){function a(a,b,c,d){function e(){f.title=a.getCurrentStateTitle(),f.screenIsSmall=b("sm")}var f=this;f.activate=e,f.states=[],f.currentState=[],f.navigation=a,e(),c.$watch(function(){return b("sm")},function(a){f.screenIsSmall=a})}angular.module("proteinApp").controller("MainController",a),a.$inject=["navigationService","$mdMedia","$scope","$window"]}(),function(){function a(a,b){b.otherwise("/main"),a.state("main",{url:"/main",templateUrl:"app/layout/main/main.html",controller:"MainController as mainController"})}var b=angular.module("proteinApp");b.config(a),a.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){function a(a,b,c,d,e,f,g){function h(){var a=k.navigation.getCurrentSectionNumber();0===a&&d.path("/"),k.screenIsSmall=e("sm");var b=angular.element(document.querySelector("#footer"))[0];if(b){var c=b.offsetHeight;k.margin=c}}function i(a){j(a)}function j(a){function b(a,b,c){a.items=c,a.closeDialog=function(){b.hide(),k.navigation.goNext()}}var c=angular.element(document.body);g.show({parent:c,template:'<md-dialog aria-label="List dialog">  <md-dialog-content class = "content-dialogue">       <span> Test your knowledge in the next section. </span>  </md-dialog-content>  <div class="md-actions">    <div flex="" layout-align="center center" ng-click="closeDialog()" class="objective-button text-center button-animation"><a><span>Start practice &nbsp;</span><span aria-hidden="true" class="arrow glyphicon glyphicon-triangle-right objective-button-arrow"></span></a></div>  </div></md-dialog>',locals:{items:k.items},controller:b}),b.$inject=["scope","$mdDialog","items"]}var k=this;k.activate=h,k.title="AnimationController",k.navigation=a,k.previosWidthVideo=0,k.margin=56;var l=angular.element(b);l.bind("resize",function(a){var b=angular.element(document.querySelector("#footer"))[0].offsetHeight,d=angular.element(document.querySelector("#video-container"))[0];d&&(k.margin=b),c.$apply()}),c.$watch(function(){return e("sm")},function(a){k.screenIsSmall=a}),k.onPlayerReady=function(a){k.API=a,console.log("Video ready")},k.videoCompleted=i,k.config={sources:[{src:f.trustAsResourceUrl(k.navigation.getCurrentAnimation()),type:"video/mp4"}],tracks:[{src:"",kind:"subtitles",srclang:"en",label:"English","default":""}],theme:"bower_components/videogular-themes-default/videogular.css",plugins:{poster:"assets/images/cover.png"}},h()}angular.module("proteinApp").controller("AnimationController",a),a.$inject=["navigationService","$window","$scope","$location","$mdMedia","$sce","$mdDialog"]}(),function(){function a(a,b,c,d,e){function f(){var a=g.navigation.getCurrentSectionNumber();0===a&&b.path("/"),g.screenIsSmall=c("sm");var d=angular.element(document.querySelector("#footer"))[0];if(d){var e=d.offsetHeight;g.margin=e}}var g=this;g.activate=f,g.title="ObjectivesController",g.navigation=a,g.margin=56;var h=angular.element(e);h.bind("resize",function(a){var b=angular.element(document.querySelector("#footer"))[0].offsetHeight,c=angular.element(document.querySelector("#objectives-container"))[0];c&&(g.margin=b),d.$apply()}),d.$watch(function(){return c("sm")},function(a){g.screenIsSmall=a}),f()}angular.module("proteinApp").controller("ObjectivesController",a),a.$inject=["navigationService","$location","$mdMedia","$scope","$window"]}(),function(){function a(a,b,c,d){function e(){var a=f.navigation.getCurrentSectionNumber();0===a&&b.path("/");var c=angular.element(document.querySelector("#footer"))[0];if(c){var d=c.offsetHeight;f.margin=d}}var f=this;f.activate=e,f.title="PracticeController",f.navigation=a,f.margin=56;var g=angular.element(c);g.bind("resize",function(a){var b=angular.element(document.querySelector("#footer"))[0].offsetHeight,c=angular.element(document.querySelector("#practice_session"))[0];c&&(f.margin=b),d.$apply()}),e()}angular.module("proteinApp").controller("PracticeController",a),a.$inject=["navigationService","$location","$window","$scope"]}(),angular.module("proteinApp").config(["$stateProvider",function(a){a.state("animation",{url:"/animation",templateUrl:"app/layout/main/section/animation/animation.html",controller:"AnimationController as animationController"}).state("objectives",{url:"/objectives",templateUrl:"app/layout/main/section/objectives/objectives.html",controller:"ObjectivesController as objectivesController"}).state("practice",{url:"/practice",templateUrl:"app/layout/main/section/practice/practice.html",controller:"PracticeController as practiceController"})}]),function(){function a(a,b,c,d){function e(a,e,f){function g(b){39===b?(a.navigation.goNext(),d.$apply()):37===b&&(a.navigation.goPrevious(),d.$apply())}a.navigation=b,angular.element(c).unbind("keyup"),c.bind("keyup",function(b){if(console.log(a.useKeyArrow),a.useKeyArrow){var c=b.keyCode;g(c)}})}var f={link:e,scope:{useKeyArrow:"="},templateUrl:"app/widgets/footer/pn-footer/pn-footer.html",restrict:"EA"};return f}angular.module("proteinApp").directive("pnFooter",a),a.$inject=["$window","navigationService","$document","$rootScope"]}(),function(){function a(a,b,c,d){function e(a,e,f){function g(){a.currentIcon="add"==a.currentIcon?"remove":"add",a.showMenu=!a.showMenu,a.currentSubSection=-1}function h(){a.showMenu=!0,a.currentIcon="remove",a.currentSubSection=-1}function i(){a.showMenu=!1,a.currentIcon="add",a.currentSubSection=-1}function j(){a.closeOnLeave&&i()}function k(b){a.currentSubSection=a.currentSubSection!=b?b:-1}function l(b){return a.currentSubSection===b}function m(b,c){console.log("Section: "+b+" subSection: "+c),a.navigation.setCurrentSectionState(b,c)}function n(){a.selectOption(-1,-1)}e.bind("click",function(a){a.stopPropagation()}),c.bind("click",function(){a.closeOnClickOutSide&&a.hideOptions(),a.$apply()}),a.showMenu=!1,a.navigation=b,a.sections=a.navigation.getSections(),a.showOptions=h,a.hideOptions=i,a.toogleOptionsMenu=g,a.currentIcon="add",a.currentSubSection=-1,a.updateCurrentSubSection=k,a.isSelectedSubSection=l,a.widthMenu="inherit",a.closeOnLeaveMouse=j,a.selectOption=m,a.introduction=n,a.screenIsSmall=d("sm")}var f={scope:{closeOnLeave:"=",closeOnClickOutSide:"="},link:e,templateUrl:"app/widgets/mainMenu/pnMainMenu/pnMainMenu.html",restrict:"EA"};return f}angular.module("proteinApp").directive("pnMainMenu",a),a.$inject=["$window","navigationService","$document","$mdMedia"]}(),function(){function a(a,b,c){function d(a,d,e){a.navigation=b;var f=a.navigation.getCurrentSectionNumber();0===f?c.path("/"):(console.log("CALL START ANIMATION DIRECTIVE"),currentSection=a.navigation.getCurrentSection(),stage=0,startPractice(),console.log("UPDATE stage"))}var e={link:d,templateUrl:"app/widgets/practice/pn-practice/pn-practice.html",restrict:"EA"};return e}angular.module("proteinApp").directive("pnPractice",a),a.$inject=["$window","navigationService","$location"]}(),angular.module("proteinApp").run(["$templateCache",function(a){a.put("app/layout/main/main.html",'<!--div(flex="", layout-fill = "",--><!--ng-class="{\'mainContent-sm\' : mainController.screenIsSmall, \'mainContent\': !mainController.screenIsSmall}")--><!--  div(layout="column", layout-margin="", layout-fill="", layout-padding="", layout-sm="column")--><!--    div(flex="", layout-fill = "")--><!--      div(layout="column", layout-fill = "", layout-align="start center",--><!--      ng-class="{\'mainTitleSm\' : mainController.screenIsSmall, \'mainTitle\': !mainController.screenIsSmall}")--><!--        h1--><!--          | {{mainController.title}}--><!--    div(flex="")--><!--      div(layout="row", layout-align="center center", layout-sm="column",--><!--      ng-class="{\'mainTitleSm\' : mainController.screenIsSmall, \'mainTitle\': !mainController.screenIsSmall}")--><!--        h2--><!--          | Voet, Voet & Pratt -&nbsp;--><!--        h2--><!--          | Fundamentals of Biochemistry--><!----><table class=center-cover><tr><td style="text-align: center; vertical-align: middle"><div ng-class="{\'mainTitleSm\' : mainController.screenIsSmall, \'mainTitle\': !mainController.screenIsSmall}"><h1>{{mainController.title}}</h1><h2>Voet, Voet & Pratt -&nbsp;</h2><h2>Fundamentals of Biochemistry</h2></div></td></tr></table>'),a.put("app/layout/main/section/animation/animation.html",'<div id=video-container flex="" layout=column layout-margin="" layout-fill="" layout-align="center center"><div style="padding-bottom: {{animationController.margin}}px" class=videogular-container><videogular vg-theme=animationController.config.theme.url vg-player-ready=animationController.onPlayerReady($API) vg-complete=animationController.videoCompleted($event)><vg-media vg-src=animationController.config.sources vg-tracks=animationController.config.tracks></vg-media><vg-controls><vg-play-pause-button></vg-play-pause-button><vg-time-display>{{ currentTime | date:"mm:ss" }}</vg-time-display><vg-scrub-bar><vg-scrub-bar-current-time></vg-scrub-bar-current-time></vg-scrub-bar><vg-volume><vg-mute-button></vg-mute-button><vg-volume-bar></vg-volume-bar></vg-volume><vg-fullscreen-button></vg-fullscreen-button></vg-controls><vg-overlay-play></vg-overlay-play><vg-buffering></vg-buffering><vg-poster vg-url=animationController.config.plugins.poster></vg-poster></videogular></div></div>'),a.put("app/layout/main/section/animation/buttom.html",""),a.put("app/layout/main/section/objectives/objectives.html",'<table style="width: 100%; height: 100%" ng-class="{\'margin-sm\' : objectivesController.screenIsSmall}"><tr><td style="text-align: center; vertical-align: middle"><div class=container-fluid><div id=objectives-container style="padding-bottom: {{objectivesController.margin}}px"><div class=row><div class=col-md-6><div layout=column layout-align="start center" class="mainTitle coverFadeInLeft"><h1>Section {{objectivesController.navigation.getCurrentSectionNumber()}}</h1><h2>{{objectivesController.navigation.getCurrentTitle()}}</h2></div></div><div class=col-md-6><div layout=column layout-align="center center"><md-whiteframe layout=column ng-animate="\'box\'" class="md-whiteframe-z2 whiteframe fadeFrame"><div style="padding: 20px"><div class=text-left><h2 class=titleGoals>Goals</h2></div><div class=text-left><div ng-repeat="objective in objectivesController.navigation.getCurrentObjectives()" class=goals><span>* {{objective}}</span></div></div><div ng-click=objectivesController.navigation.goNext() class="objective-button text-center"><a><div><span>Watch animation &nbsp;</span><span aria-hidden=true class="arrow glyphicon glyphicon-triangle-right objective-button-arrow"></span></div></a></div></div></md-whiteframe></div></div></div></div></div></td></tr></table><!--.center-conteiner--><!--  div.objectives-container(flex="",--><!--  ng-class="{\'mainContent-sm\' : objectivesController.screenIsSmall, \'mainContent\': !objectivesController.screenIsSmall}")--><!--    div(layout="row", layout-margin="", layout-fill="", layout-sm="column", layout-align="center start")--><!--      div.fill-95.coverFadeInLeft(flex="")--><!--        div(layout="column", layout-align="start center")--><!--          .mainTitle(layout="column" layout-align="start center")--><!--            h1--><!--              | Section {{objectivesController.navigation.getCurrentSectionNumber()}}--><!--            h2--><!--              | {{objectivesController.navigation.getCurrentTitle()}}--><!--      div.fill-95(flex="", layout-padding = "")--><!--        div(layout="column", layout-align="start center", layout-padding = "")--><!--          md-whiteframe.md-whiteframe-z2.whiteframe.fadeFrame(layout="column", layout-align="center start",--><!--          layout-padding = "", ng-animate="\'box\'")--><!--            h2.titleGoals--><!--              | Goals--><!--            md-content(ng-repeat="objective in objectivesController.navigation.getCurrentObjectives()", layout-padding = "",--><!--            flex = "", layout-align="center center")--><!--              | * {{objective}}--><!--            .objective-button.text-center(flex = "", layout-fill="", layout-align="center center",--><!--            ng-click = \'objectivesController.navigation.goNext()\')--><!--              a--><!--                span--><!--                  | Watch animation &nbsp;--><!--                span.arrow.glyphicon.glyphicon-triangle-right.objective-button-arrow(aria-hidden=\'true\')--><!----><!--          div.margin-sm(layout="column", layout-align="start center", show-sm)--><!--            br--><!----><!----><!----><!----><!----><!----><!----><!----><!----><!---->'),a.put("app/layout/main/section/practice/practice.html",'<table class=center-cover><tr><td style="text-align: center; vertical-align: middle"><pn-practice></pn-practice></td></tr></table>'),a.put("app/widgets/footer/pn-footer/pn-footer.html",'<div tabindex=0 class=container><div id=footer class="navbar navbar-inverse navbar-fixed-bottom"><div layout=row><div flex=""><a ng-show=!!navigation.getPrevious().title ng-click=navigation.goPrevious() class="btn navbar-btn pn-footer-button"><span aria-hidden=true class="glyphicon glyphicon-triangle-left"></span>&nbsp {{navigation.getPrevious().title}}</a></div><div flex="" hide-sm="" layout=row layout-align="center center"><a class="btn navbar-btn pn-footer-button footerCenterTitle">{{navigation.getCurrentTitle()}}</a></div><div flex="" layout=row layout-align="end center"><a ng-show=!!navigation.getNext().title ng-click=navigation.goNext() class="btn navbar-btn pn-footer-button">{{navigation.getNext().title}} &nbsp;<span aria-hidden=true class="glyphicon glyphicon-triangle-right"></span></a></div></div><div layout=row><div flex="" hide-gt-sm="" layout=row layout-align="center center"><a class="btn navbar-btn pn-footer-button footerCenterTitle">{{navigation.getCurrentTitle()}}</a></div></div></div></div>'),a.put("app/widgets/mainMenu/pnMainMenu/pnMainMenu.html",'<div style="position: fixed)" class=container-fluid><ul id=mainTopMenu ng-class="{\'menuShadow\':showMenu}" ng-style="{\'width\': widthMenu }" ng-mouseleave=closeOnLeaveMouse() class=menu><li><a href="" ng-click=toogleOptionsMenu() class="topMenuOption menuShadow"><span><ng-md-icon icon={{currentIcon}} size=22 options="{&quot;duration&quot;: 375}"></ng-md-icon></span><span class=titleMenu>{{navigation.getCurrentStateTitle()}}</span></a></li><li ng-show=showMenu ng-repeat="section in sections" ng-class="{\'active\' : isSelectedSubSection($index)}" class="subMenu fadeMenu"><a href="" ng-click=updateCurrentSubSection($index)><span class=subTitleMenu>{{section.name}}</span></a><ul><li ng-repeat="item in navigation.getSectionStructure()"><a ui-sref={{navigation.getSectionStructureStates()[$index]}} ng-click="selectOption($parent.$index, $index)"><span class=subTitleItemMenu>{{item}}</span></a></li></ul></li><li><a ng-show=showMenu ng-click=introduction() ui-sref=main class="topMenuOption fadeMenu"><div><span class=footerSubTitleMenu>Voet, Voet & Pratt</span></div><div><span class=footerTitleMenu>Fundamentals of Biochemistry</span></div></a></li></ul></div><!--, ng-mouseleave = "hideOptions()"-->'),a.put("app/widgets/practice/pn-practice/pn-practice.html",'<div style="padding-bottom: {{practiceController.margin}}px" class=content><div id=practice_session><img id=loading src="components/images/ajax-loader.gif"><div id=nextButton class=labels>Next</div><div id=retryButton class=labels>Retry</div><div id=instructions class=labels></div><div id=message class=labels></div><div id=multiple_choice></div><div id=drag class=labels></div><div id=popUps><table class=center-cover><tr><td style="text-align: center; vertical-align: middle"><div class=container-fluid><div class=row><div class="pull-right popUps-container"><div layout=column layout-align="center center"><md-whiteframe layout=column ng-animate="\'box\'" class="md-whiteframe-z2 whiteframe fadeFrame"><div><div class=text-left><div id=instructions-pn><span>Instructions</span></div><div id=feedback-top-pn><span>Feedback Top</span></div><div id=feedback-bottom-pn><span>Feedback bottom</span></div></div><div class="objective-button text-left"><div layout=row><div id=prev-button-pn><div class="practice-button text-center"><a id=prev-button href=""><div><span aria-hidden=true class="arrow glyphicon glyphicon-triangle-left practice-button-arrow"></span>&nbsp; Prev</div></a></div></div><div id=center-button-pn flex="" layout=row layout-align="center center"></div><div id=next-button-pn layout=row layout-align="end center"><div class="practice-button text-right"><a id=next-button href=""><div><span>Next &nbsp;</span><span aria-hidden=true class="arrow glyphicon glyphicon-triangle-right practice-button-arrow"></span></div></a></div></div></div></div></div></md-whiteframe></div></div></div></div></td></tr></table></div></div><div id=navigation_instructions></div></div>')}]);